plugins {
  id "java"
  id "org.springframework.boot" version "2.2.2.RELEASE"
  id "io.spring.dependency-management" version "1.0.8.RELEASE"
  // TODO: check if required, can be achieved with config but may not be better.
  id "net.ltgt.apt" version "0.20"

  // Code Quality
  id "checkstyle"
}

group = "uk.nhs.hee.trainee.details"
version = "0.0.1-SNAPSHOT"
sourceCompatibility = "11"

configurations {
  compileOnly {
    extendsFrom annotationProcessor
  }
}

repositories {
  mavenCentral()
}

dependencies {
  // Spring Boot
  implementation "org.springframework.boot:spring-boot-starter-data-mongodb"
  implementation "org.springframework.boot:spring-boot-starter-web"
  testImplementation "org.springframework.boot:spring-boot-starter-test"

  // Lombok
  compileOnly "org.projectlombok:lombok:1.18.10"
  annotationProcessor "org.projectlombok:lombok:1.18.10"

  // Mapstruct
  implementation "org.mapstruct:mapstruct:1.3.1.Final"
  annotationProcessor "org.mapstruct:mapstruct-processor:1.3.1.Final"
  testAnnotationProcessor "org.mapstruct:mapstruct-processor:1.3.1.Final"

  // Swagger
  implementation "io.springfox:springfox-swagger2:2.9.2"
  implementation "io.springfox:springfox-swagger-ui:2.9.2"
}

checkstyle {
  toolVersion = "8.26"
  config = resources.text.fromArchiveEntry(configurations.checkstyle[0], 'google_checks.xml')
  maxErrors = 0
  maxWarnings = 0
}

test {
  useJUnitPlatform()
}
